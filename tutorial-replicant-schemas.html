<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <link rel="shortcut icon" type="image/x-icon" href="https://raw.githubusercontent.com/nodecg/nodecg/master/src/favicon.ico">
    <title>Replicant Validation - Documentation</title>

    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="https://code.ionicframework.com/ionicons/2.0.1/css/ionicons.min.css">
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav>
    <li class="nav-link nav-home-link"><a href="index.html">Home</a></li><li class="nav-heading">Tutorials</li><li class="nav-item"><a href="tutorial-1_what-is-nodecg.html">What is NodeCG?</a></li><li class="nav-item"><a href="tutorial-assets.html">Assets</a></li><li class="nav-item"><a href="tutorial-bundle-configuration.html">Bundle Configuration</a></li><li class="nav-item"><a href="tutorial-custom-routes.html">Custom Routes</a></li><li class="nav-item"><a href="tutorial-making-dialogs.html">Making Dashboard Dialogs</a></li><li class="nav-item"><a href="tutorial-manifest.html">package.json Manifest</a></li><li class="nav-item"><a href="tutorial-migrating-0.7-to-0.8.html">Migrating from 0.7 to 0.8</a></li><li class="nav-item"><a href="tutorial-migrating-0.8-to-0.9.html">Migrating from 0.8 to 0.9</a></li><li class="nav-item"><a href="tutorial-nodecg-configuration.html">NodeCG Configuration</a></li><li class="nav-item"><a href="tutorial-performance-tips.html">Performance Tips</a></li><li class="nav-item"><a href="tutorial-portable-nodecg.html">Portable NodeCG</a></li><li class="nav-item"><a href="tutorial-replicant-schemas.html">Replicant Validation</a></li><li class="nav-item"><a href="tutorial-sentry.html">Error Reporting with Sentry.io</a></li><li class="nav-item"><a href="tutorial-sounds.html">Sounds</a></li><li class="nav-item"><a href="tutorial-using-bower.html">Using Bower Dependencies</a></li><li class="nav-item"><a href="tutorial-using-npm.html">Using npm Dependencies</a></li><li class="nav-heading">Classes</li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="NodeCG.html">NodeCG</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="NodeCG.html#findCue">findCue</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="NodeCG.html#getDialog">getDialog</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="NodeCG.html#getDialogDocument">getDialogDocument</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="NodeCG.html#getSocketIOServer">getSocketIOServer</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="NodeCG.html#listenFor">listenFor</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="NodeCG.html#log">log</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="NodeCG.html#mount">mount</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="NodeCG.html#playSound">playSound</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="NodeCG.html#readReplicant">readReplicant</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="NodeCG.html#Replicant">Replicant</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="NodeCG.html#sendMessage">sendMessage</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="NodeCG.html#stopAllSounds">stopAllSounds</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="NodeCG.html#stopSound">stopSound</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="NodeCG.html#unlisten">unlisten</a></span></li>
</nav>

<div id="main">
    
    <h1 class="page-title">Replicant Validation</h1>
    

    <section>

<header>
    
</header>

<article>
    <p>As of 0.8.4, bundle authors may define an optional schema for the <a href="NodeCG.html#Replicant"><code>Replicants</code></a> in their bundle.
If present, NodeCG will validate every change made to the Replicant against this schema. 
If any change fails validation, either on the server or on the client, an error will be synchronously thrown.</p>
<p>All schemas are in the <a href="http://json-schema.org/">JSON Schema</a> format. To add a schema to a Replicant, 
create a <code>.json</code> file with the same name as your Replicant in your bundle's <code>schemas</code> folder. For example, 
if <code>my-bundle</code> has a Replicant called <code>foo</code>, the schema would be located at <code>nodecg/bundles/my-bundle/schemas/foo.json</code>. 
NodeCG will automatically see and load this schema on startup. Changes to the schema require restarting NodeCG.</p>
<p>If a Replicant's schema has defaults defined, NodeCG will use those defaults to automatically build a <code>defaultValue</code>
for the Replicant. This auto-generated <code>defaultValue</code> is overridden by any <code>defaultValue</code> that is provided during Replicant
declaration.</p>
<p>If for any reason a Replicant's persisted value becomes invalid, NodeCG will discard this value on startup.</p>
<h2 id="example">Example</h2>
<p><code>nodecg/bundles/my-bundle/schemas/foo.json</code></p>
<pre class="prettyprint source"><code>{
    &quot;$schema&quot;: &quot;http://json-schema.org/draft-04/schema#&quot;,
    &quot;type&quot;: &quot;object&quot;,
    &quot;additionalProperties&quot;: false,
    &quot;properties&quot;: {
        &quot;bar&quot;: {
            &quot;type&quot;: &quot;string&quot;,
            &quot;description&quot;: &quot;The value of bar, which is a String.&quot;,
            &quot;default&quot;: &quot;hello world&quot;
        },
        &quot;baz&quot;: {
            &quot;type&quot;: &quot;number&quot;,
            &quot;description&quot;: &quot;The value of baz, which is a Number.&quot;,
            &quot;default&quot;: &quot;0&quot;
        }
    },
    &quot;required&quot;: [&quot;bar&quot;, &quot;baz&quot;]
}</code></pre><p><code>nodecg/bundles/my-bundle/extension.js</code></p>
<pre class="prettyprint source"><code>module.exports = function (nodecg) {
    // We don't need to specify a `defaultValue` here, it will be automatically generated from the defaults
    // in the schema.
    const foo = nodecg.Replicant('foo');

    /* You can override this by specifying your own `defaultValue` when declaring the Replicant.
    const foo = nodecg.Replicant('foo', {
        defaultValue: {
            bar: &quot;hi&quot;,
            baz: 5
        }
    }); */

    console.log(foo.value.bar); //=> &quot;hello world&quot;
    console.log(foo.value.baz); //=> 0

    foo.value.bar = &quot;greetings planet&quot;; // Valid change, no error will be thrown.
    foo.value.baz = &quot;this should be a number!&quot;; // Invalid change, an error will be thrown.
};</code></pre>
</article>

</section>

</div>

<br class="clear">

<footer>
    Generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.5.4</a> on Sun Sep 17 2017 12:13:59 GMT-0500 (Central Daylight Time) using the Minami theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/linenumber.js"></script>
<script>
  ((window.gitter = {}).chat = {}).options = {
    room: 'nodecg/nodecg'
  };
</script>
<script src="https://sidecar.gitter.im/dist/sidecar.v1.js" async defer></script>
</body>
</html>