<!doctype html>
<html>
<head>
	<meta charset="utf-8">
	<script src="../../bower_components/webcomponentsjs/webcomponents-loader.js"></script>
	<script src="../../bower_components/web-component-tester/browser.js"></script>
	<link rel="import" href="../../lib/dashboard/public/elements/assets/ncg-asset-file.html">
</head>
<body>
	<test-fixture id="ncgAssetFile">
		<template>
			<ncg-asset-file></ncg-asset-file>
		</template>
	</test-fixture>

	<script>
		suite('<ncgAssetfile>', () => {
			let ncgAssetFile;

			setup(() => {
				ncgAssetFile = fixture('ncgAssetFile');
			});

			test('_handleDeleteClick', () => {
				const stubbedFetch = sinon.stub(window, 'fetch');
				window.fetch.returns(Promise.resolve(mockApiResponse()));
				function mockApiResponse(body = {}) {
					return new window.Response(JSON.stringify(body), {status: 410});
				}

				ncgAssetFile.file = {url: '/foo'};
				return ncgAssetFile._handleDeleteClick().then(() => {
					stubbedFetch.restore();
				});
			});
		});
	</script>
</body>
</html>
